{
  "id": "639B8E0C-2C2C-41E7-B822-4D03AEFCB92B",
  "name": "DockerBuild",
  "friendlyName": "Docker Publish",
  "description": "Wraps the VS Tools for Docker script and executes it",
  "author": "Colin Dembovsky (colinsalmcorner.com)",
  "helpMarkDown": "Runs the script generated by [VS Tools for Docker](https://visualstudiogallery.msdn.microsoft.com/0f5b2caa-ea00-41c8-b8a2-058c7da0b3e4)",
  "category": "Build",
  "visibility": [
    "Build",
    "Release"
  ],
  "demands": [],
  "version": {
    "Major": "0",
    "Minor": "1",
    "Patch": "0"
  },
  "minimumAgentVersion": "1.83.0",
  "instanceNameFormat": "Docker publish $(imageName)",
  "groups": [
    {
      "name": "build",
      "displayName": "Build",
      "isExpanded": true
    },
    {
      "name": "publish",
      "displayName": "Publish Options",
      "isExpanded": false
    },
    {
      "name": "advanced",
      "displayName": "Advanced",
      "isExpanded": false
    }
  ],
  "inputs": [
    {
      "name": "pubxmlFile",
      "type": "filePath",
      "label": "Docker pubxml File",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Path to Docker pubxml file"
    },
    {
      "name": "serverUrl",
      "type": "string",
      "label": "Docker Server URL",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Docker server URL",
      "groupName": "build"
    },
    {
      "name": "imageName",
      "type": "string",
      "label": "Docker image name",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Name for the Docker image",
      "groupName": "build" 
    },
    {
      "name": "buildOnly",
      "type": "boolean",
      "label": "Build only",
      "defaultValue": "true",
      "required": true,
      "helpMarkDown": "If set to true, just run 'Docker build'. Otherwise, start a container from the image.",
      "groupName": "build"
    },
    {
      "name": "dockerfileRelativePath",
      "type": "string",
      "label": "Dockerfile Path",
      "defaultValue": "Dockerfile",
      "required": false,
      "helpMarkDown": "Path to the Dockerfile (relative to output directory)",
      "groupName": "build" 
    },
    {
      "name": "hostPort",
      "type": "string",
      "label": "Host Port",
      "defaultValue": "80",
      "required": false,
      "helpMarkDown": "Port to open on the Docker host",
      "groupName": "publish"
    },
    {
      "name": "containerPort",
      "type": "string",
      "label": "Container Port",
      "defaultValue": "80",
      "required": false,
      "helpMarkDown": "Port to open on the container",
      "groupName": "publish" 
    },
    {
      "name": "runOptions",
      "type": "string",
      "label": "Run Options",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Specify run options",
      "groupName": "publish" 
    },
    {
      "name": "isWebApp",
      "type": "boolean",
      "label": "Web App",
      "defaultValue": "true",
      "required": true,
      "helpMarkDown": "Set to true if this is a web app (sets environment options)",
      "groupName": "publish" 
    },
    {
      "name": "isWindowsContainer",
      "type": "boolean",
      "label": "Create Windows Container",
      "defaultValue": "false",
      "required": true,
      "helpMarkDown": "Set to true if this is a Windows Container",
      "groupName": "publish" 
    },
    {
      "name": "authOptions",
      "type": "string",
      "label": "Auth Options",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Use to specify auth options for your Docker server",
      "groupName": "advanced" 
    },
    {
      "name": "removeConflictingContainers",
      "type": "boolean",
      "label": "Remove Conflicting Containers",
      "defaultValue": "true",
      "required": false,
      "helpMarkDown": "Remove conflicting containers",
      "groupName": "advanced" 
    }
  ],
  "execution": {
    "Node": {
      "target": "DockerPublish.js",
      "argumentFormat": ""
    },  
    "PowerShell": {
      "target": "$(currentDirectory)\\DockerPublish.ps1",
      "argumentFormat": "",
      "workingDirectory": "$(currentDirectory)"
    }
  }
}